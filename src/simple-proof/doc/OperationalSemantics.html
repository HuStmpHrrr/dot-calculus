<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../README.html">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">OperationalSemantics</h1>

<div class="code">
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coq.Program.Equality</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">LibLN</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Definitions.html#"><span class="id" title="library">Definitions</span></a> <a class="idref" href="Binding.html#"><span class="id" title="library">Binding</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab27"></a><h1 class="section">Normal Forms</h1>

A normal form is defined in the WadlerFest DOT paper as:

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">::=</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>

<div class="paragraph"> </div>

This corresponds to an evaluation context of the form
<span class="inlinecode">(<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span>)*</span> <span class="inlinecode">[</span> <span class="inlinecode">]</span> whose hole is filled by a variable <span class="inlinecode"><span class="id" title="var">x</span></span>
or value <span class="inlinecode"><span class="id" title="var">v</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="normal_form"><span class="id" title="inductive">normal_form</span></a>: <a class="idref" href="Definitions.html#trm"><span class="id" title="inductive">trm</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="nf_var"><span class="id" title="constructor">nf_var</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a> (<a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a>)<br/>
| <a name="nf_val"><span class="id" title="constructor">nf_val</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span>, <a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a> (<a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a>)<br/>
| <a name="nf_let"><span class="id" title="constructor">nf_let</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> <span class="id" title="var">t</span>, <a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a> (<a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> (<a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab28"></a><h1 class="section">Operational Semantics</h1>


<div class="paragraph"> </div>

The first four reduction rules correspond directly to the rules in Figure 7 of the paper.

<div class="paragraph"> </div>

The last two rules are congruence rules that implement the meaning of evaluation contexts.
Specifically, if a term <span class="inlinecode"><span class="id" title="var">u</span></span> decomposes into an evaluation context and subterm
as <span class="inlinecode"><span class="id" title="var">u</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t</span>]</span> and <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t</span>]</span> reduces to <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t'</span>]</span> according to the rules from Figure 7,
then the purpose of the two congruence rules is to ensure that <span class="inlinecode"><span class="id" title="var">u</span></span> also reduces
to <span class="inlinecode"><span class="id" title="var">u'</span></span>, where <span class="inlinecode"><span class="id" title="var">u'</span></span> is the term <span class="inlinecode"><span class="id" title="var">u'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t'</span>]</span>. The grammar for evaluation contexts
in the paper is:

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">::=</span> <span class="inlinecode">[]</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode">[]</span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">e</span></span>

<div class="paragraph"> </div>

A sentential form <span class="inlinecode"><span class="id" title="var">eta</span></span> in a derivation of an evaluation context <span class="inlinecode"><span class="id" title="var">e</span></span> is a string
of terminals (the elements of DOT terms) and the non-terminal <span class="inlinecode"><span class="id" title="var">e</span></span>. Define
<span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta</span>)</span> to be a string of terminals formed by replacing <span class="inlinecode"><span class="id" title="var">e</span></span> with <span class="inlinecode">[]</span> in <span class="inlinecode"><span class="id" title="var">eta</span></span>.
We argue that whenever <span class="inlinecode"><span class="id" title="var">eta_1</span></span> directly derives <span class="inlinecode"><span class="id" title="var">eta_2</span></span> (<span class="inlinecode"><span class="id" title="var">eta_1</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">eta_2</span></span>),
and the reduction rules infer that <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2'</span>]</span>, then the
reduction rules also infer that <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1'</span>]</span>, where
<span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2</span>]</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1</span>]</span> and <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2'</span>]</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1'</span>]</span>.
The argument is by considering each of the three cases
in the evaluation context grammar that justify <span class="inlinecode"><span class="id" title="var">eta_1</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">eta_2</span></span>.
The first case replaces <span class="inlinecode"><span class="id" title="var">e</span></span> with <span class="inlinecode">[]</span>, so <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)</span>, so the conclusion
trivially holds. The second case replaces <span class="inlinecode"><span class="id" title="var">e</span></span> with <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode">[]</span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span>. In this case,
the reduction congruence rule <span class="inlinecode"><span class="id" title="var">red_let_trm</span></span> has <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2'</span>]</span>
as a premise and <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1'</span>]</span> as a conclusion. The third case
replaces <span class="inlinecode"><span class="id" title="var">e</span></span> with <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">e</span></span>.  Similarly, the congruence rule <span class="inlinecode"><span class="id" title="var">red_let_val</span></span>
has <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2'</span>]</span> as a premise and <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1'</span>]</span>
as a conclusion. Thus, whenever <span class="inlinecode"><span class="id" title="var">eta_1</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">eta_2</span></span> and <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_2</span>)[<span class="id" title="var">t_2'</span>]</span>,
we also have that <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta_1</span>)[<span class="id" title="var">t_1'</span>]</span>.

<div class="paragraph"> </div>

Reasoning inductively about the steps in the context-free grammar derivation of <span class="inlinecode"><span class="id" title="var">e</span></span>,
for every sentential
form <span class="inlinecode"><span class="id" title="var">eta</span></span> that occurs in that derivation, the congruence reduction rules infer that
<span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta</span>)[<span class="id" title="var">u</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta</span>)[<span class="id" title="var">u'</span>]</span>, where
<span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta</span>)[<span class="id" title="var">u</span>]</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t</span>]</span> and <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta</span>)[<span class="id" title="var">u'</span>]</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t'</span>]</span>. In particular, this is true for the
sentential form <span class="inlinecode"><span class="id" title="var">eta</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span></span>, the first sentential form of every derivation. Since
<span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">eta</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">e</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode">[]</span>, we have shown that the congruence reduction rules infer that <span class="inlinecode"><span class="id" title="var">u</span></span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">u'</span></span>.

<div class="paragraph"> </div>

Starting with an evaluation context <span class="inlinecode"><span class="id" title="var">e</span></span> in its conclusion, the <span class="inlinecode"><span class="id" title="var">red_let_val</span></span> rule appends
<span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> to the context to yield a new context used in its premise.
(More precisely, the rule replaces the non-terminal <span class="inlinecode"><span class="id" title="var">e</span></span> within the context in the conclusion by
<span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">e</span></span>.) This is the only reduction rule that modifies an existing evaluation context. Therefore,
in a derivation of a reduction judgment <span class="inlinecode"><span class="id" title="var">u</span></span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">u'</span></span> in an empty evaluation context, every evaluation context
that appears in the derivation is of the form <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x_1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v_1</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x_n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v_n</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode">[]</span>.
Therefore, in order to be able to represent every step of every such derivation of a reduction
judgement in the Coq proof, it is sufficient to represent evaluation contexts by a data structure
that can represent all evaluation contexts of this form. The proof represents these evaluation
contexts by a list of pairs of variables and values.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;e '[' t1 '|-&gt;' t2 ']'" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60, <span class="id" title="var">t1</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 39).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="red"><span class="id" title="inductive">red</span></a> : <a class="idref" href="Definitions.html#ec"><span class="id" title="definition">ec</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#trm"><span class="id" title="inductive">trm</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#trm"><span class="id" title="inductive">trm</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">x</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">lambda</span>(<span class="id" title="var">T</span>)<span class="id" title="var">t</span></span>    <br>
    <span class="inlinecode">――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t</span>^<span class="id" title="var">y</span>]</span> <span class="inlinecode"></span>  
</div>
<div class="code">
| <a name="red_apply"><span class="id" title="constructor">red_apply</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">lc_trm</span></a> <a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#trm_app"><span class="id" title="constructor">trm_app</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a>)<a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Definitions.html#val_lambda"><span class="id" title="constructor">val_lambda</span></a> <a class="idref" href="OperationalSemantics.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="Definitions.html#trm_app"><span class="id" title="constructor">trm_app</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">e</span>(<span class="id" title="var">x</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">nu</span>(<span class="id" title="var">T</span>)...{<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span>}...</span>  <br>
    <span class="inlinecode">―――――――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">x.a</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t</span>]</span>  
</div>
<div class="code">
| <a name="red_project"><span class="id" title="constructor">red_project</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span> <span class="id" title="var">ds</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">lc_trm</span></a> <a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#trm_sel"><span class="id" title="constructor">trm_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="OperationalSemantics.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> <a class="idref" href="OperationalSemantics.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="OperationalSemantics.html#ds"><span class="id" title="variable">ds</span></a>) <a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> (<a class="idref" href="Definitions.html#open_defs"><span class="id" title="definition">open_defs</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#ds"><span class="id" title="variable">ds</span></a>) (<a class="idref" href="Definitions.html#def_trm"><span class="id" title="constructor">def_trm</span></a> <a class="idref" href="OperationalSemantics.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="Definitions.html#trm_sel"><span class="id" title="constructor">trm_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="OperationalSemantics.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">t</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t</span>^<span class="id" title="var">y</span>]</span> 
</div>
<div class="code">
| <a name="red_let_var"><span class="id" title="constructor">red_let_var</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">lc_trm</span></a> <a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> (<a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a>)) <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> (<a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a>)) <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode">(<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">t</span>)</span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">u</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">u</span>]</span> 
</div>
<div class="code">
| <a name="red_let_let"><span class="id" title="constructor">red_let_let</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> <span class="id" title="var">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">lc_trm</span></a> <a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> (<a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="OperationalSemantics.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="OperationalSemantics.html#u"><span class="id" title="variable">u</span></a><a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> (<a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="OperationalSemantics.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="OperationalSemantics.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="OperationalSemantics.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t'</span>]</span>                            <br>
    <span class="inlinecode">――――――――――――――――――――――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">u</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t'</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">u</span>]</span>     
</div>
<div class="code">
| <a name="red_let_trm"><span class="id" title="constructor">red_let_trm</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">u</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">lc_trm</span></a> <a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#u"><span class="id" title="variable">u</span></a><a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="OperationalSemantics.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="OperationalSemantics.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="OperationalSemantics.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode">(<span class="id" title="var">e</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span>)</span> <span class="inlinecode">[<span class="id" title="var">t</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode">(<span class="id" title="var">e</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span>)</span> <span class="inlinecode">[<span class="id" title="var">t'</span>]</span>        <br>
    <span class="inlinecode">――――――――――――――――――――――――――――――――――――――――</span>   <br>
    <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">t</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">t'</span>]</span>   
</div>
<div class="code">
| <a name="red_let_val"><span class="id" title="constructor">red_let_val</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">v</span> <span class="id" title="var">L</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">lc_trm</span></a> <a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> (<a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="OperationalSemantics.html#L"><span class="id" title="variable">L</span></a>  <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">(</span></a><a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">)</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> (<a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="Definitions.html#trm_let"><span class="id" title="constructor">trm_let</span></a> (<a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="OperationalSemantics.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a><br/>
<span class="id" title="keyword">where</span> <a name="a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">&quot;</span></a>e [ t |-&gt; t' ]" := (<a class="idref" href="OperationalSemantics.html#red"><span class="id" title="inductive">red</span></a> <span class="id" title="var">e</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>).<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="OperationalSemantics.html#red"><span class="id" title="inductive">red</span></a> <a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a>.<br/>

<br/>
</div>

<div class="doc">
Reduction in an empty context 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="02007db97cbde7d2bc4092cba36f71b6"><span class="id" title="notation">&quot;</span></a>t '|-&gt;' u" := (<span class="id" title="axiom">empty</span> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a><span class="id" title="var">t</span> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <span class="id" title="var">u</span><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
Typing in an empty context 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="2c1ee3b3d344ea94c10f3c597db028ac"><span class="id" title="notation">&quot;</span></a>'⊢' t ':' T" := (<span class="id" title="axiom">empty</span> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">t</span><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <span class="id" title="var">T</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">t</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 59).<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">e</span></span> is locally closed and <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">e</span>[<span class="id" title="var">t'</span>]</span>, then <span class="inlinecode"><span class="id" title="var">t'</span></span> is locally closed.  
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lc_env_eval_to_lc_trm"><span class="id" title="lemma">lc_env_eval_to_lc_trm</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#lc_ec"><span class="id" title="inductive">lc_ec</span></a> <a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a><a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="OperationalSemantics.html#t'"><span class="id" title="variable">t'</span></a><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#afd15ce86cb06a17a89415ad3428d2d9"><span class="id" title="notation">lc_trm</span></a> <a class="idref" href="OperationalSemantics.html#t'"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hlce</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">He</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="Binding.html#lc_at_trm"><span class="id" title="inductive">lc_at_trm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="var">inversions</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">try</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <span class="id" title="definition">binds</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#lc_ec_binds_inv"><span class="id" title="lemma">lc_ec_binds_inv</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="Binding.html#lc_at_val"><span class="id" title="inductive">lc_at_val</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="var">inversions</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="Binding.html#lc_at_trm"><span class="id" title="inductive">lc_at_trm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">solve</span> [<span class="id" title="var">inversions</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">applys</span> <a class="idref" href="Binding.html#lc_at_to_open_trm_val_def_defs"><span class="id" title="lemma">lc_at_to_open_trm_val_def_defs</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#lc_defs_has"><span class="id" title="lemma">lc_defs_has</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>... <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">applys</span> <a class="idref" href="Binding.html#lc_at_to_open_trm_val_def_defs"><span class="id" title="lemma">lc_at_to_open_trm_val_def_defs</span></a>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Binding.html#lc_at_relaxing_trm_val_def_defs"><span class="id" title="lemma">lc_at_relaxing_trm_val_def_defs</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>. <span class="id" title="var">pick_fresh</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Binding.html#lc_ec"><span class="id" title="inductive">lc_ec</span></a> (<span class="id" title="var">e</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">v</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">x</span> <span class="id" title="var">H3</span> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">applys</span> <a class="idref" href="Binding.html#open_to_lc_at_trm_val_def_defs"><span class="id" title="lemma">open_to_lc_at_trm_val_def_defs</span></a>. <span class="id" title="var">eassumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The next two lemmas show that if <span class="inlinecode"><span class="id" title="var">t</span>^<span class="id" title="var">x</span></span> is in normal form, then <span class="inlinecode"><span class="id" title="var">t</span></span> is in normal form. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="open_rec_preserve_normal_form"><span class="id" title="lemma">open_rec_preserve_normal_form</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">k</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a> (<a class="idref" href="Definitions.html#open_rec_trm"><span class="id" title="definition">open_rec_trm</span></a> <a class="idref" href="OperationalSemantics.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#open_rec_trm"><span class="id" title="definition">open_rec_trm</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#open_rec_trm"><span class="id" title="definition">open_rec_trm</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">fold</span> <a class="idref" href="Definitions.html#open_rec_trm"><span class="id" title="definition">open_rec_trm</span></a> <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">fold</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <span class="id" title="var">t2</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHt2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H4</span> <span class="id" title="var">H2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
See previous lemma <span class="inlinecode"><span class="id" title="var">open_rec_preserve_normal_form</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="open_preserve_normal_form"><span class="id" title="lemma">open_preserve_normal_form</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a> (<a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#normal_form"><span class="id" title="inductive">normal_form</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OperationalSemantics.html#open_rec_preserve_normal_form"><span class="id" title="lemma">open_rec_preserve_normal_form</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">x</span></span> fresh                            <br>
    <span class="inlinecode"><span class="id" title="var">e</span></span> and <span class="inlinecode"><span class="id" title="var">v</span></span> are locally closed       <br>
    <span class="inlinecode">(<span class="id" title="var">e</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span>=<span class="id" title="var">v</span>)[<span class="id" title="var">t</span>^<span class="id" title="var">x</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode">(<span class="id" title="var">e</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span>=<span class="id" title="var">v</span>)[<span class="id" title="var">t'</span>]</span>     <br>
    <span class="inlinecode">――――――――――――――――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">f</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">\<span class="id" title="var">notin</span></span> <span class="inlinecode"><span class="id" title="var">fv</span>(<span class="id" title="var">f</span>)</span> <span class="inlinecode"><span class="id" title="var">and</span></span> <span class="inlinecode"><span class="id" title="var">t'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">f</span>^<span class="id" title="var">x</span></span>    <span class="inlinecode"></span>
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="open_rec_eval_to_open_rec"><span class="id" title="lemma">open_rec_eval_to_open_rec</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> <a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_val"><span class="id" title="definition">fv_val</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#lc_ec"><span class="id" title="inductive">lc_ec</span></a> <a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Binding.html#46d7b722aab7cf38712e5969c865790b"><span class="id" title="notation">lc_val</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">[</span></a> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="OperationalSemantics.html#t'"><span class="id" title="variable">t'</span></a><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">f</span><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="notation">(</span><a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <span class="id" title="var">f</span><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span> <a class="idref" href="OperationalSemantics.html#t'"><span class="id" title="variable">t'</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="Definitions.html#close_trm"><span class="id" title="definition">close_trm</span></a> <span class="id" title="var">x</span> <span class="id" title="var">t'</span>). <span class="id" title="var">remember</span> (<a class="idref" href="Definitions.html#close_trm"><span class="id" title="definition">close_trm</span></a> <span class="id" title="var">x</span> <span class="id" title="var">t'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ct</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">ct</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#close_rec_trm_val_def_defs_no_capture"><span class="id" title="lemma">close_rec_trm_val_def_defs_no_capture</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqct</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#open_left_inverse_close_trm_val_def_defs"><span class="id" title="lemma">open_left_inverse_close_trm_val_def_defs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="OperationalSemantics.html#lc_env_eval_to_lc_trm"><span class="id" title="lemma">lc_env_eval_to_lc_trm</span></a>, <a class="idref" href="Binding.html#lc_ec_cons"><span class="id" title="constructor">lc_ec_cons</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Substitution for reduction 
<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">x</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span></span> fresh                                                  <br>
    <span class="inlinecode">(<span class="id" title="var">e1</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span>=<span class="id" title="var">v</span>,</span> <span class="inlinecode"><span class="id" title="var">e2</span>)[<span class="id" title="var">t1</span>]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode">(<span class="id" title="var">e1</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span>=<span class="id" title="var">v</span>,</span> <span class="inlinecode"><span class="id" title="var">e2</span>)[<span class="id" title="var">t2</span>]</span>                     <br>
    <span class="inlinecode">―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――</span> <br>
    <span class="inlinecode">(<span class="id" title="var">e1</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>=<span class="id" title="var">v</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>],</span> <span class="inlinecode"><span class="id" title="var">e2</span>)[<span class="id" title="var">t1</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]]</span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode">(<span class="id" title="var">e1</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>=<span class="id" title="var">v</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>],</span> <span class="inlinecode"><span class="id" title="var">e2</span>)[<span class="id" title="var">t2</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]]</span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="eval_renaming_subst"><span class="id" title="lemma">eval_renaming_subst</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">v</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> <a class="idref" href="OperationalSemantics.html#e1"><span class="id" title="variable">e1</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> <a class="idref" href="OperationalSemantics.html#e1"><span class="id" title="variable">e1</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <a class="idref" href="OperationalSemantics.html#e2"><span class="id" title="variable">e2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> <a class="idref" href="OperationalSemantics.html#e1"><span class="id" title="variable">e1</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> <a class="idref" href="OperationalSemantics.html#e1"><span class="id" title="variable">e1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <a class="idref" href="OperationalSemantics.html#e2"><span class="id" title="variable">e2</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> <a class="idref" href="OperationalSemantics.html#e2"><span class="id" title="variable">e2</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_val"><span class="id" title="definition">fv_val</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <a class="idref" href="OperationalSemantics.html#t1"><span class="id" title="variable">t1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">(</span></a><a class="idref" href="OperationalSemantics.html#e1"><span class="id" title="variable">e1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="OperationalSemantics.html#e2"><span class="id" title="variable">e2</span></a><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">)[</span></a><a class="idref" href="OperationalSemantics.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="OperationalSemantics.html#t2"><span class="id" title="variable">t2</span></a><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">(</span></a><a class="idref" href="OperationalSemantics.html#e1"><span class="id" title="variable">e1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Binding.html#subst_val"><span class="id" title="definition">subst_val</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="OperationalSemantics.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="Binding.html#subst_env"><span class="id" title="definition">subst_env</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="OperationalSemantics.html#e2"><span class="id" title="variable">e2</span></a><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">)[</span></a><a class="idref" href="Binding.html#subst_trm"><span class="id" title="definition">subst_trm</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="OperationalSemantics.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="Binding.html#subst_trm"><span class="id" title="definition">subst_trm</span></a> <a class="idref" href="OperationalSemantics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="OperationalSemantics.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="OperationalSemantics.html#t2"><span class="id" title="variable">t2</span></a><a class="idref" href="OperationalSemantics.html#a170f7798b39e506ea0b403bc6a474cf"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">binds_subst_env</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">contra_bind</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <span class="id" title="var">_</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">_</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">notin_union</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">_</span> : ?<span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> ?<span class="id" title="var">e</span>, <span class="id" title="var">_</span> : <span class="id" title="definition">binds</span> ?<span class="id" title="var">x</span> <span class="id" title="var">_</span> ?<span class="id" title="var">e</span> |- <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">binds_fresh_inv</span>; [<span class="id" title="var">eassumption</span> | <span class="id" title="tactic">auto</span> 1]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">solve_left_most</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_left</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Binding.html#subst_env"><span class="id" title="definition">subst_env</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_map</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">proj1</span> (<span class="id" title="lemma">proj2</span> (<a class="idref" href="Binding.html#subst_fresh_trm_val_def_defs"><span class="id" title="lemma">subst_fresh_trm_val_def_defs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>))); <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Binding.html#binds_fv_ec_vals"><span class="id" title="lemma">binds_fv_ec_vals</span></a>; <span class="id" title="tactic">eauto</span> 2.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hfx</span> <span class="id" title="var">Hfy</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">He</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_middle_inv</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">destruct_all</span>; <span class="id" title="var">case_if</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contra_bind</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#subst_open_commut_trm"><span class="id" title="lemma">subst_open_commut_trm</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Binding.html#subst_fvar"><span class="id" title="definition">subst_fvar</span></a>; <span class="id" title="var">case_if</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OperationalSemantics.html#red_apply"><span class="id" title="constructor">red_apply</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="Binding.html#subst_typ"><span class="id" title="definition">subst_typ</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">T</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs</span> : <a class="idref" href="Definitions.html#val_lambda"><span class="id" title="constructor">val_lambda</span></a> (<a class="idref" href="Binding.html#subst_typ"><span class="id" title="definition">subst_typ</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">T</span>) (<a class="idref" href="Binding.html#subst_trm"><span class="id" title="definition">subst_trm</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">t</span>) <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binding.html#subst_val"><span class="id" title="definition">subst_val</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<a class="idref" href="Definitions.html#val_lambda"><span class="id" title="constructor">val_lambda</span></a> <span class="id" title="var">T</span> <span class="id" title="var">t</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> 2;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="definition">binds</span> ?<span class="id" title="var">y</span> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">y</span> <span class="id" title="notation">~</span> <span class="id" title="var">_</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">_</span>) ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_middle_eq</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Binding.html#subst_env"><span class="id" title="definition">subst_env</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_map</span>; <span class="id" title="tactic">auto</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_right</span>, <a class="idref" href="Binding.html#binds_subst_env"><span class="id" title="lemma">binds_subst_env</span></a>; <span class="id" title="tactic">trivial</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_left_most</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_middle_inv</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">destruct_all</span>; <span class="id" title="var">case_if</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contra_bind</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OperationalSemantics.html#red_project"><span class="id" title="constructor">red_project</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<a class="idref" href="Binding.html#subst_typ"><span class="id" title="definition">subst_typ</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">T</span>) (<span class="id" title="var">ds</span>:=<a class="idref" href="Binding.html#subst_defs"><span class="id" title="definition">subst_defs</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">ds</span>); <span class="id" title="tactic">auto</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs</span> : <a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> (<a class="idref" href="Binding.html#subst_typ"><span class="id" title="definition">subst_typ</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">T</span>) (<a class="idref" href="Binding.html#subst_defs"><span class="id" title="definition">subst_defs</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">ds</span>) <span class="id" title="notation">=</span> <a class="idref" href="Binding.html#subst_val"><span class="id" title="definition">subst_val</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> <span class="id" title="var">T</span> <span class="id" title="var">ds</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> 2;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_right</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#binds_subst_env"><span class="id" title="lemma">binds_subst_env</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#open_subst_defs"><span class="id" title="lemma">open_subst_defs</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_middle_eq</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Binding.html#subst_env"><span class="id" title="definition">subst_env</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_map</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#open_subst_defs2"><span class="id" title="lemma">open_subst_defs2</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">solve_left_most</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#open_subst_defs"><span class="id" title="lemma">open_subst_defs</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">case_if</span>; <span class="id" title="var">simpls</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#subst_open_commut_trm"><span class="id" title="lemma">subst_open_commut_trm</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Binding.html#subst_fvar"><span class="id" title="definition">subst_fvar</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_if</span>; <span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#lc_at_subst_trm_val_def_defs"><span class="id" title="lemma">lc_at_subst_trm_val_def_defs</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#lc_at_subst_trm_val_def_defs"><span class="id" title="lemma">lc_at_subst_trm_val_def_defs</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#lc_at_subst_trm_val_def_defs"><span class="id" title="lemma">lc_at_subst_trm_val_def_defs</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#lc_at_subst_trm_val_def_defs"><span class="id" title="lemma">lc_at_subst_trm_val_def_defs</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">e1</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> <span class="id" title="var">e1</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">e2</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_val"><span class="id" title="definition">fv_val</span></a> <span class="id" title="var">v</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_val"><span class="id" title="definition">fv_val</span></a> <span class="id" title="var">v0</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <span class="id" title="var">t</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">\{</span><span class="id" title="var">x</span><span class="id" title="notation">}</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">\{</span><span class="id" title="var">y</span><span class="id" title="notation">}</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x0</span> <span class="id" title="notation">&lt;&gt;</span> <span class="id" title="var">x</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x0</span> <span class="id" title="notation">&lt;&gt;</span> <span class="id" title="var">y</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Binding.html#subst_fvar"><span class="id" title="definition">subst_fvar</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">x0</span> <span class="id" title="notation">=</span> <span class="id" title="var">x0</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Binding.html#subst_fvar"><span class="id" title="definition">subst_fvar</span></a>. <span class="id" title="var">case_if</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Binding.html#subst_open_commut_trm"><span class="id" title="lemma">subst_open_commut_trm</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Binding.html#subst_open_commut_trm"><span class="id" title="lemma">subst_open_commut_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x0</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">_</span> <span class="id" title="var">H6</span> <span class="id" title="var">v</span> (<span class="id" title="var">e2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x0</span> <span class="id" title="notation">~</span> <span class="id" title="var">v0</span>) <span class="id" title="var">e1</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> (<a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">t</span>)). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#open_fv_trm_val_def_defs"><span class="id" title="lemma">open_fv_trm_val_def_defs</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> (<span class="id" title="var">e2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x0</span> <span class="id" title="notation">~</span> <span class="id" title="var">v0</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span>~ <a class="idref" href="Binding.html#fv_ec_vals_push_eq"><span class="id" title="lemma">fv_ec_vals_push_eq</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">e1</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> (<span class="id" title="var">e2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x0</span> <span class="id" title="notation">~</span> <span class="id" title="var">v0</span>) <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> (<span class="id" title="var">e2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x0</span> <span class="id" title="notation">~</span> <span class="id" title="var">v0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_val"><span class="id" title="definition">fv_val</span></a> <span class="id" title="var">v</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> (<a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">t</span>)); <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">e1</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="Definitions.html#fv_ec_vals"><span class="id" title="definition">fv_ec_vals</span></a> <span class="id" title="var">e1</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> (<span class="id" title="var">e2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x0</span> <span class="id" title="notation">~</span> <span class="id" title="var">v0</span>)); <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Binding.html#subst_env"><span class="id" title="definition">subst_env</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<span class="id" title="var">e2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x0</span> <span class="id" title="notation">~</span> <span class="id" title="var">v0</span>) <span class="id" title="notation">=</span> <a class="idref" href="Binding.html#subst_env"><span class="id" title="definition">subst_env</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">e2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x0</span> <span class="id" title="notation">~</span> <a class="idref" href="Binding.html#subst_val"><span class="id" title="definition">subst_val</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">v0</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Binding.html#subst_env"><span class="id" title="definition">subst_env</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_push</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">H9</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H11</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>? <span class="id" title="lemma">concat_assoc</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
